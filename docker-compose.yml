version: '2'
services:
    zookeeper:
        image: 'wurstmeister/zookeeper:latest'
        hostname: zookeeper
        ports:
            - '2181:2181'
    kafka:
        image: 'wurstmeister/kafka:0.10.2.1'
        ports:
            - '9092:9092'
        environment:
            KAFKA_ADVERTISED_HOST_NAME: 127.0.0.1
            KAFKA_CREATE_TOPICS: 'mytopic:1:1'
            KAFKA_ZOOKEEPER_CONNECT: 'zookeeper:2181'
        volumes:
            - '/var/run/docker.sock:/var/run/docker.sock'
        depends_on:
            - zookeeper
    postgres:
        image: 'postgres:9.6'
        container_name: postgres-docker
        environment:
            - POSTGRES_USER=airflow
            - POSTGRES_PASSWORD=airflow
            - POSTGRES_DB=airflow
        ports:
            - '5432:5432'
        volumes:
            - '/srv/docker/postgresql:/var/lib/postgresql'
    mysql:
        image: datajoint/mysql
        ports:
          - "3306:3306"
        environment:
          - MYSQL_ROOT_PASSWORD=123
        volumes:
          - ./data:/var/lib/mysql
